<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title>pagination</title>
		<link rel="stylesheet" type="text/css" href="css/index.css"/>
	</head>

	<body>
		<div id="model">

		</div>
		<script src="js/jquery.3.2.1.js"></script>
		<script type="text/javascript">
			var page = 4,
				total = 16;
			var xm_pagination = function(len) {
				xhtml = '';
				xhtml += '<div class="x-pagination xSecond"><ul>';
				xhtml += '<li></li>';
				switch(true) {
					case len <= 5:
						for(var i = 1; i <= len; i++) {
							xhtml += '<li ' + (i === page ? 'class="x-pageActive"' : '') + '>' + i + '</li>';
						}
						break;
					case len > 5:
						switch(true) {
							case page <= 3:
								for(var i = 1, length = 4; i <= length; i++) {
									xhtml += '<li ' + (i === page ? 'class="x-pageActive"' : '') + '>' + i + '</li>';
								}
								xhtml += '<li class="x-Dots">···</li>';
								xhtml += '<li>' + (len - 1) + '</li>';
								break;
							case page >= len - 2:
								xhtml += '<li>1</li>';
								xhtml += '<li class="x-Dots">···</li>';
								for(var i = len - 2; i <= len; i++) {
									xhtml += '<li ' + (i === page ? 'class="x-pageActive"' : '') + '>' + i + '</li>';
								}
								break;
							default:
								xhtml += '<li>1</li>';
								xhtml += '<li class="x-Dots">···</li>';
								for(var i = page - 1, length = page + 1; i <= length; i++) {
									xhtml += '<li ' + (i === page ? 'class="x-pageActive"' : '') + '>' + i + '</li>';
								}
								xhtml += '<li class="x-Dots">···</li>';
								xhtml += '<li>' + len + '</li>';
								break;
						}
						break;
					default:
						break;
				}
				xhtml += '<li></li>';
				xhtml += '</ul>';
				xhtml += '<input class="xInputControl" type="text" id="" value="' + page + '" /><button class="xBtnControl">跳转</button></div>';
				$('#model').html(xhtml);
				//跳转按钮
				var $xBtnControl = $('.xBtnControl'),
					$xInputControl = $('.xInputControl');
				$xBtnControl.on('click', function() {
					if(isNaN(~~$xInputControl.val()) || ~~$xInputControl.val() === page || ~~$xInputControl.val() < 1 || ~~$xInputControl.val() > total) {
						$xInputControl.val(page);
						return false
					};
					page = ~~$xInputControl.val(),
						xm_pagination(total);
				});
				$xInputControl.on('keydown', function(e) {
					if(e.keyCode === 13) {
						if(isNaN(~~$xInputControl.val()) || ~~$xInputControl.val() === page || ~~$xInputControl.val() < 1 || ~~$xInputControl.val() > total) {
							$xInputControl.val(page);
							return false
						};
						page = ~~$xInputControl.val(),
						xm_pagination(total);
					}
				});
				//分页按钮点击事件
				var $pagination = $('.x-pagination');
				$pagination.on('click', 'li', function() {
					var index = $(this).index(),
						lastIndex = $pagination.find('li').length - 1,
						isDots = $(this).is('.x-Dots');
					if(isDots) return false;
					switch(index) {
						case 0:
							if(page !== 1) {
								page--;
								xm_pagination(total);
							}
							break;
						case lastIndex:
							if(page !== len) {
								page++;
								xm_pagination(total);
							}
							break;
						default:
							console.log(~~$(this).index())
							page = ~~$(this).text();
							xm_pagination(total);
							break;
					}
				});
			};
			xm_pagination(total);
		</script>
	</body>

</html>